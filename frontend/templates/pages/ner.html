{% extends 'layouts/services.html' %}
{% block title %}Named Entity Recognition{% endblock %}
{% block content %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
$(function() {
  $('input[name="type"]').on('click', function() {
    if ($(this).val() == 'url') {
      $('#textboxes').show();
    } else {
      $('#textboxes').hide();
    }

    if ($(this).val() == 'txt') {
      $('#textboxes1').show();
    } else {
      $('#textboxes1').hide();
    }
  });

});

function download(filename, text) {
    var element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    element.setAttribute('download', filename);

    element.style.display = 'none';
    document.body.appendChild(element);

    element.click();

    document.body.removeChild(element);
}

// Start file download.
document.getElementById("dwn-btn").addEventListener("click", function(){
    // Generate download of hello.txt file with some content
    var text = '{{ annotatedTags | safe }}';
    var filename = "NER_annotated_text.txt";
    
    download(filename, text);
}, false);
</script>
</head>
<body>

<div>
<h1>Named Entity Recognition</h1>
<p> <u>Description of the service:</u> </p>
<p> NER is probably the first step towards information extraction that seeks to locate and classify named entities in text into pre-defined categories such as the names of persons, organizations, locations, expressions of times, quantities, monetary values, percentages, etc. NER is used in many fields in Natural Language Processing. <br>
<br>
This online NER service for English uses SpaCy’s trained model to identify the named entities. Input can be either in text format or URL.
<br>
Note: In case of URL as input, output can be generated only if web-scrapping is permitted for that particular URL.</p>

<p> <u>Libraries and Resources used</u></p>
<p>SpaCy’s Named Entity Recognition model trained on  <a href="https://catalog.ldc.upenn.edu/LDC2013T19"> OntoNotes5</a>.<br/>
<p> <u>Author</u><br /> Ananya Mukherjee <br />ananya.mukherjee@research.iiit.ac.in</p>

<hr>
<h3> Choose your input</h3>
   <input type="radio" name="type" value="txt"> Enter Text
   <input type="radio" name="type" value="url"> Enter URL
</div>


<form action="{{ url_for('services.ner_call') }}" method="post" id="ner">

<div id="textboxes" style="display: none">
Input URL: <input class="form-control" type="url" name="url_ip" pattern="^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$"/>
</div>

<div id="textboxes1" style="display: none">
Input Text: <textarea class="form-control" id="txtarea" rows="4" cols="50" name="txt_ip"> </textarea>
</div>

<input type="submit" value="Get NER"/>
</form>

<br>

<hr>
<form id="output">
  <label for="text">Output:</label>
  <input type="button" id="dwn-btn" value="Download NER annotated text file"/>
  
		<div id="outputText" class="row">{{ tags | safe }}</div>
</form>

<hr>

<div class="page-header">
  <p ><u><b>API Details:</b></u></p>
  <p style="text-indent: 2.5rem"><u>API end point</u></p>
  <p style="text-indent: 5rem">http://localhost:8080/getNER/ <br />
  <p style="text-indent: 2.5rem"><u>Input JSON format</u></p>
  <p style="text-indent: 5rem">JSON should consist of two arguments :</p>
    <p style="text-indent: 5rem">key: "text" , value: text for which NER is to be generated.</p>
    <p style="text-indent: 5rem">key: "type", value: number of sentences the user wants in the summary </p>
  <p style="text-indent: 2.5rem"><u>Output JSON format</u></p>
  <p style="text-indent: 5rem">Service return a JSON with only one key </p>
    <p style="text-indent: 5rem">key : "output_text",    value:  Output with annotated NER tags using Displacy.</p>
	<p style="text-indent: 5rem">key : "annotated_tags", value:  Output with annotated NER tags</p>
	<p style="text-indent: 5rem">key : "error",          value:  Error </p>

</div>

{% endblock %}